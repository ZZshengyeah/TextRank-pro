address strateg behavior in a deploi microeconom resourc alloc chaki ng† , philip buonadonna∗ , brent n. chun∗ , alex c. snoeren‡ , amin vahdat‡ † harvard ∗ intel research berkelei ‡ uc san diego market@eec.harvard.edu abstract while market-base system have long been propos as  solut for distribut resourc alloc, few have been deploi for product us in real comput system.  toward thi end, we present our initi experi us  mirag, a microeconom resourc alloc system base on a repeat combinatori auction. mirag alloc time on a heavili-us 148-node wireless sensor network testb. in particular, we focu on observ strateg user behavior over a four-month period in which 312,148 node hour were  alloc across 11 research project. base on these result, we present a set of kei challeng for market-base resourc  alloc system base on repeat combinatori auction. final, we propos refin to the system"s current  auction scheme to mitig the strategi observ to date and also comment on some initi step toward build an  approxim strategyproof repeat combinatori auction. categori and subject descriptor c.2.4 [distribut system]: distribut applic gener term measur, design, econom, experiment 1. introduct market-base system have long been propos as  solut for resourc alloc in distribut system includ comput grid [2, 20], wide-area network testb [9], and peer-to-peer system [17]. yet, while the theoret  underpin of market-base scheme have made signific stride in recent year, practic integr of market-base mechan into real comput system and empir  observ of such system under real workload ha remain an elus goal. toward thi end, we have design,  implement, and deploi a microeconom resourc alloc system call mirag [3] for schedul testb time on a 148-node wireless sensor network (sensornet) testb at  intel research. the system, which emploi a repeat  combinatori auction [5, 14] to schedul alloc, ha been in product us for over four month and ha schedul over 312,148 node hour across 11 research project to date. in design and deploi mirag, we had three primari goal. first, we want to valid whether a market-base resourc alloc scheme wa necessari at all. an  econom problem onli exist when resourc ar scarc.  therefor, a kei goal wa to first measur both resourc  content and the rang of underli valuat user place on the resourc dure period of resourc scarciti.  second, we want to observ how user would actual behav in a market-base environ. much of econom theori is predic on ration user behavior, which form the basi for motiv research effort such as strategyproof  mechan design [4, 6, 15, 16, 19]. with mirag, we want to observ to what extent ration held and in what wai user would attempt to strateg and game the system.  final, we want to identifi what other practic problem would emerg in a deploy of a market base system. in thi paper, we report briefli on our first goal while focus primarili on the second. the third is left for futur work. empir result base on four month of usag have  valid the kei motiv factor in us an auction-base scheme (i.e., signific resourc content and wide  vari valuat) but have also point to real-world  observ of strateg user behavior. in deploi mirag, we made the earli decis to base the system on a repeat combinatori auction known not to be strategyproof. that is, self-interest user could attempt to increas their  person gain, at the expens of other, by not reveal their true valu to the system. we made thi decis mainli  becaus design a strategyproof mechan remain an open, challeng problem and we want to deploi a work  system and gain experi with real user to address our three goal in a time manner. deploi a non-strategyproof mechan also had the benefit of test ration and see how and to what extent user would try to game the system. the kei contribut of thi paper is an analysi of such strateg behavior as observ over a four-month time period and propos refin for mitig such  behavior en rout to build an approxim strategyproof  repeat combinatori auction. the rest of thi paper is organ as follow. in section 2, 99 we present an overview of mirag includ high-level  observ on usag over a four-month period. in section 3, we examin strateg user behavior, focus on the four  primari type of strategi emploi by user in the system. base on these result, section 4 present a set of kei  challeng for market-base resourc alloc system base on repeat combinatori auction. as a first step in  address some of these challeng, we describ refin to mirag"s current auction scheme that mitig the  strategi observ to date and also comment on some initi step toward build an approxim strategyproof repeat combinatori auction for mirag. final, in section 5, we conclud the paper. 2. the mirag system sensornet testb ar a critic tool for develop and evalu sensornet technolog in a control and  instrument environ. as with mani larg-scale system, howev, resourc manag is a kei problem given that it is not econom for user to each build and oper their own testb. in mirag [3], testb resourc ar  spaceshar and alloc us a repeat combinatori auction in a close virtual currenc environ. user compet for testb resourc by submit bid which specifi resourc combin of interest in space/time (e.g., ani 32 mica2 mote for 8 hour anytim in the next two dai) along with a maximum valu amount the user is will to pai. a  combinatori auction is then period run to determin the win bid base on suppli and demand while maxim aggreg util deliv to user. 0 20 40 60 80 100 0 20 40 60 80 100 120 totalmica2util(%) dai sinc dec 9, 2004 figur 1: testb util for 97 mica2 mote. in mirag, resourc ar alloc us a first-price  combinatori auction which clear everi hour. in each round of the auction, a roll window of futur testb resourc is avail for alloc with subset of that window  be remov from the pool as resourc get alloc. in our initi deploy, we us a 72-hour window and  deploi the system on a testb consist of 148 node (97 mica2 [1] and 51 mica2dot sensor node or mote). in each round of the auction, user bid for subset of  resourc avail in the current window. when the system is first brought onlin, a full 148-node × 72-hour window is avail, where each row of the window repres the avail of a particular node across time, and each  column repres the avail of the testb for a given hour. the leftmost column of the window repres node avail for the hour immedi follow the auction; these node/hour will never again be avail for auction. all other node/hour not alloc at thi or previou  auction continu to be offer for sale at subsequ auction. in each subsequ round (i.e., everi hour), portion of the current window ar alloc as bid ar match to  avail resourc and a new rightmost 148-node × 1-hour  column of resourc roll in and replac the leftmost column of resourc which expir. there is no time share of node: given limit local comput and commun power, onc a sensor is alloc to a user for a particular time period, it is unavail to all other user. in mirag, user place combinatori bid specifi  resourc combin of interest in space/time along with a maximum valu amount the user is will to pai. more specif, a bid bi = (vi, si, ti, di, fmin, fmax, ni, oki)  indic the user want ani combin of ni mote from the set oki simultan for a durat of di hour (di ∈ {1, 2, . . . , 32}), a start time anywher between si and ti, and a radio frequenc in the rang [fmin, fmax].1 the user also is will to pai up to vi unit of virtual currenc for these resourc. in essenc, each bid specifi in a succinct  manner what subset of the resourc window would serv as  accept resourc that meet the user"s constraint and how import the desir resourc alloc is to the user. we deploi mirag on decemb 9, 2004 and the system ha been in continu product us for over four month. in the process, it lifetim ha overlap with sever  period of signific resourc content includ the  sigcomm "05 and sensi "05 confer deadlin. overal, the system ha 18 research project regist to us the system span a varieti of academ and commerci  institut. of these, 11 have activ bid and receiv time on the system. as of april 8, 2005, the system ha receiv 322 bid, and alloc 312,148 node hour over the testb"s 148 node. 0 0.2 0.4 0.6 0.8 1 0.0001 0.001 0.01 0.1 1 10 100 cumulativefractionofbid bid valu per node hour u1 u2 u3 u4 u5 u6 u7 figur 2: bid valu distribut by user. as a measur of content, figur 1 show the  util of the 97 mica2 mote over the past four month. it depict period of signific content extend over multipl consecut dai, in particular near major  deadlin.2 to quantifi user valuat for resourc, figur 2 1 the frequenc constraint ar us to schedul testb  alloc such that alloc co-schedul in time do not collid by us the same radio frequenc. in practic,  distinct frequenc have not been a scarc resourc. 2 result for the 51 mica2dot mote ar similar and  omit for space. 100 plot distribut of bid valu per node hour for the seven most activ user in the system. thi graph show that user valuat for testb resourc vari substanti, span over four order of magnitud. valuat ar also distribut rel evenli across each order of magnitud, suggest that these rang ar not due to a few anomal bid but rather to a wide rang of underli user valuat for testb resourc. these dual observ-signific resourc content and a wide rang of valuat-support the us of an auction, which is design precis to har such wide vari valuat to comput an effici and user util-maxim node alloc. lastli, as anoth measur of resourc content and the util of drive resourc alloc via user-specifi  valuat, figur 3 plot the median per-node clear price for both mica2 and mica2dot mote over time. to comput these price, we price an alloc node-hour for a win bid with valu v for n node for k hour as v/nk. unalloc node-hour ar assign a price of 0. for a given hour, we examin all mica2 mote and plot the median node-hour price for that hour and do the same for mica2dot mote. of particular interest in thi graph ar the sequenc of price from dai 45-60 and dai 105-120 (i.e., period lead up to confer deadlin). these sequenc show that the valu of testb resourc, as measur by market price for mote, increas exponenti (logarithm y-axi) dure time of peak content. thi suggest that allow user to express valuat for resourc to drive the resourc  alloc process is import for make effect us of the testb (e.g., to distinguish import us from low  prioriti activ). howev, it also suggest that user becom exponenti desper to acquir resourc as deadlin  approach. as it turn out, it is precis dure these time that user will try their hardest to game the system and, therefor, when the efficaci of a market-base mechan can be best evalu. 1e-05 0.0001 0.001 0.01 0.1 1 10 0 20 40 60 80 100 120 valuepernodehour dai sinc dec 9, 2004 mica2 mica2dot figur 3: median node-hour market price. 3. observ strateg behavior dure the past four month of oper, mirag ha  emploi two distinct auction mechan and observ four primari type of strateg behavior from user. the first auction mechan, a1, wa deploi from decemb 9, 2004 to march 28, 2005. dure thi time period, we  observ three differ type of strateg behavior (s1-s3), the most recent of which (s3) result in signific game of the system. in respons to the impact of s3, we deploi a second mechan, a2, on march 29, 2005 (dai 111 in figur 1 and 3). while a2 mitig or elimin the known shortcom of a1-in particular the vulner strategi s3 exploit that prompt the chang in the first place-it wa soon discov that a2 remain vulner to anoth strategi, s4, which wa predict discov and exploit by a motiv user commun. we ar  current in the process of design a mechan to address the weak in a2 that is abus by s4. of cours, ideal we would develop a provabl strategyproof mechan.  howev, thi remain an open research problem for repeat combinatori auction. in thi section, we describ the two auction mechan a1 and a2, mirag"s virtual currenc polici, the four type of observ strateg behavior s1-s4, and their impact on aggreg util deliv. 3.1 auction and virtual currenc our first auction mechan, a1 wa a first-price,  openbid (i.e., user can see all outstand bid from compet user) combinatori auction that clear everi hour base on a greedi algorithm. in each round of auction, the current set of bid wa sort by valu per node hour and bid were greedili fit into the remain portion of the current window of avail resourc. like a1, our second auction, a2, wa also base on a greedi clear algorithm. it kei differ were that (i) it wa a seal-bid auction and (ii) it alloc resourc over a 148-node × 104-hour window with bid start time constrain to be within the next 72 hour (the reason for thi will becom appar when we discuss strategi s3). in both auction, win bid from previou auction were publicli visibl for price feedback and the same  virtual currenc polici wa us. our virtual currenc polici assign two number to each user"s bank account: a baselin valu and a number of share. when creat, each bank  account is initi to it baselin valu. onc fund, a user can then begin to bid and acquir testb resourc through mirag. in each round of the auction, account for win bid ar debit and the proce ar redistribut through a proport profit-share polici base on bank account share valu. the primari purpos of thi polici is to  reward user who refrain from us the system dure time of peak demand and penal those who us resourc  aggress dure period of scarciti. these reward result in transient burst of credit and ar balanc by anoth mechan, a save tax, to prevent idl user from sit on larg amount of excess credit forev (a us it or lose it polici). in our deploy, an administr set the  virtual currenc polici. bank account for extern user were assign baselin and share valu set to 1000, while bank account for intern user (u4 and u5) were assign larger alloc with baselin and share valu set to 2000. 3.2 strateg behavior the follow ar descript of the four primari bid strategi observ over the past four-month. s1: underbid base on current demand. in a1, all outstand bid were publicli visibl. consequ, when user would observ a lack of demand, some user would bid correspondingli low amount rather than their true valu. for exampl, on user would frequent bid 1 or 2 when no other bid were present. while underbid in the absenc of competit is not a problem per se, it doe rais two 101 issu. first, if a seller wa collect revenu for profit, such bid lead to suboptim outcom for the seller. second, should other user enter compet bid befor the auction clear, user will need to refin their bid to allow the system to comput an alloc that maxim aggreg util. thi second problem then lead to strategi s2. s2: iter bid. becaus user ar allow to modifi their bid and a1 wa an open auction, iter refin on"s bid valu in respons to other user" bid valu should, in theori, have no effect on who win the auction; user with higher valuat-who mai also be  underbiddingshould eventu outbid those with lower valuat after suffici iter. the problem is that user do not  behav thi (ration) wai. usabl overhead matter: user in mirag bid onc and perhap modifi their bid a second time. the end result is that ineffici mai aris sinc the auction mai clear with bid valu that ar underst. while bid proxi that automat adjust user bid in respons to other bid ar effect in singl-good auction, it is unclear how such proxi could be gener effect in a combinatori auction without actual implement the same clear algorithm us by mirag (which could be computation expens). in summari, s1 and s2 both point toward the need for a strategyproof auction mechan in mirag. in such an auction, a user"s optim strategi is alwai to bid truthfulli the first time. thu, ration user will never underbid and iter bid is unnecessari. s3: roll window manipul. unlik auction for  tangibl good, resourc alloc in comput system  fundament involv time, sinc share of resourc impli that a resourc cannot be assign to a given user/process forev. in mirag, we address the issu of time by  sell resourc over a roll window 72 hour into the futur with user abl to bid for block 1, 2, . . . , or 32 hour in length. what we did not anticip, howev, wa what would happen when the entir window of resourc becom fulli alloc. in thi scenario, which wa the norm near the recent sensi "05 deadlin, the entir 148-node ×  72hour window is alloc. a user bid for, sai, 32 hour thu need to minim wait 32 hour for 32 new 148-node × 1-hour column of resourc to becom avail. the problem here is that a user can game the system by observ other bid and simpli request fewer hour. sinc 16 column will roll into the resourc window befor 32 column, a user bid for 16 hour outbid a 32-hour bid independ of each bid"s valu becaus resourc for the 32-hour bid ar not avail when the auction clear. of cours, if other user also begin bid for 16 hour, thi opportun disappear but then move to durat shorter than 16 hour. in the limit, all user bid for 1-hour block, therebi elimin the possibl of obtain longer  resourc alloc which mai be critic to the underli sensornet experi. in practic, we observ thi type of game push win bid durat down to 2 hour. with rampant game of the system occur through s3, we respond by implement and deploi auction a2. as mention, a kei differ of a2 compar to a1 is that it alloc resourc over a 104-hour window with bid start time constrain to be within the next 72 hour. in expand the window and expand (while still  constrain) the rang of start time, a2 elimin strategi s3. when the entir 148-node × 72-hour window is alloc, a pend 16-hour bid and a pend 32-hour bid will both time project valu node hour 04-02-2005 03:58:04 u2 1590 97 32 04-02-2005 05:05:45 u1 5 24 4 04-02-2005 05:28:23 u1 130 40 4 04-02-2005 06:12:12 u1 1 33 4 tabl 1: strategi s4 on 97 mica2 mote. have their first opportun for an alloc when 32 new column becom avail. at that point, both the 16-hour bid and the 32-hour bid will have an opportun to obtain an alloc. such alloc ar then determin by the usual greedi clear algorithm. s4: auction sandwich attack. while a2 elimin s3 and significantli reduc s1 and s2, it still retain a weak of a1 that had yet to be discov and exploit. in the auction sandwich attack, a user exploit two piec of  inform: (i) histor inform on previou win bid to estim the current workload and (ii) the greedi natur of the auction clear algorithm. in thi particular case, a user emploi a strategi of split a bid for 97 mica2 mote across sever bid, onli on of which ha a high valu per node hour. sinc the high valu bid is like to win due to the greedi natur of the auction clear algorithm and sinc all other user at the time were all request 97 mote (base on the histor inform and the fact that the sensi "05 deadlin wa immin requir experi at scale), no other bid could backfil the remain slot; the user"s remain bid would then fit those slot at a low price. an actual occurr is shown in tabl 1. here, user u1 us three bid, the main on be a bid with valu 130 (valu per node hour 130/(4 · 40) = 0.813) which is us to outbid a bid with valu 1590 (valu per node hour 1590/(32 · 97) = 0.0512). onc the high valu 40-node bid ha occupi it portion of the resourc window, no other 97-node bid can be match. consequ, the user  backfil on the remain 57 node us two bid: a 24-node bid and a 33-node bid, both at low valuat. 4. challeng and refin design an appropri auction mechan is kei to  address the abov strategi. specif, our goal for such a mechan includ: (i) strategyproof, (ii)  comput tractabl, and (iii) optim alloc. the  gener vickrei auction (gva) [8, 18] is the onli known  combinatori mechan that provid both strategyproof and optim alloc. howev, it also is  computation intract as it is np-hard to calcul the alloc as well as individu payment. other vcg-base  mechan exist that replac the alloc algorithm in gva with approxim on to provid tractabl. in thi case, howev, strategyproof is no longer avail [16]. these goal ar in conflict for vcg and in gener [10]. we thu must make certain trade-off. with thi in mind, we now present a two-phase roadmap for improv mirag: (i) short-term improv to the current mechan that mitig the effect of exist  strategi; and (ii) design a new mechan that approxim achiev our three goal simultan. 4.1 ongo improv our first improv is a mix-integ program 102 (mip) formul as an altern to the greedi algorithm. thi is aim directli at elimin strategi s4. while the mip doe not provid strategyproof, it is abl to comput approxim-optim alloc. like the gva, howev, the mip is computation demand and thu care formul of the mip and optim base on the observ workload from mirag will be requir to  ensur time clear of the auction. our first step is to test and optim our mip-base algorithm on auction data from the past four month. we can then run both the mip  alongsid the greedi algorithm in parallel and select the higher qualiti result each time the auction clear. second, we can also augment the auction with addit rule and fee to further mitig strateg behavior. to elimin s4, two possibl ar to restrict each user to have either on outstand bid at a time or to mandat that user ar not allow to have multipl overlap  alloc in time. to mitig s1 and s2, we could add transact fee. with such fee in place, a user who  underst a bid and intend to iter refin it will have a disincent to do so given that each iter incur a fee. final, anoth approach to elimin s4 is to modifi the greedi algorithm such that if user do have bid whose alloc could overlap in time, then those potenti  alloc ar consid from lowest to highest valu per node hour. in effect, thi allow bid for overlap alloc but creat a disincent for user to place such bid. 4.2 toward a strategyproof mechan clearli, we need to evalu our goal and identifi where we can make trade-off in design a new mechan.  comput tractabl is a fundament requir for  oper reason. strategyproof or, minim, make the system hard to manipul is also kei given the behavior we have observ. final, our mechan should comput near-optim alloc given our comput time budget. among the potenti mechan we can extend, the lo scheme [12] seem to be a good start point. it is a fast  algorithm as the alloc rule is a greedi mechan,  rank bid with some norm such as valu per node hour. the advantag of lo is it special payment scheme that is tightli link to the greedi alloc. essenti, a winner i pai the norm of the first bidder deni access time the amount of unit (i.e. node hour) that i won. thi featur make it strategyproof. the main downsid, howev, is that it assum user ar singl-mind, mean that each  bidder onli care about a specif set of good (e.g., a specif list of node for specif durat) and thei do not valu anyth els. unfortun, thi is highli restrict and contradict what mirag current offer it user, name the abil to select ani subset of node for ani slot and submit multipl bid. thu, lo is vulner to s4 and to avoid it we must find a wai to extend lo and it  strategyproof properti to satisfi complex-bidder. realist, even with a strategyproof lo scheme for complex bidder there will like be further strategi we have yet to encount and that we should consid in our design. for instanc, our discuss so far focus on  strategyproof within a singl auction. across auction,  howev, there mai be tempor strategi that ar possibl. for exampl, in a particular auction, suppos the highest bidder want all node and pai, us gva payment scheme for simplic, the next bidder"s valu. thi same bidder mai be better off by wait until the next auction, if the user can still win and face bidder that have even lower valu. in thi case, the user will gain addit util due to a lower payment. thi, howev, mai creat variou problem as total revenu, total valu, as well as alloc effici across the auction mai be advers affect. there ar two techniqu we can us to address  tempor strategi. the first is a wrapper scheme such as the on emploi by virtual world (vw) [13] that make  sequenc of individu strategyproof auction (e.g., lo) strategyproof. what vw doe is, after bidder i win, it track what would have happen if i had submit in a subsequ auction instead. specif, it track what i would have paid in all follow auction dure i"s patienc (i.e., the maximum time i is will to wait for an  alloc) and keep track of the lowest possibl payment. i will instead be charg the lowest payment and will thu have no incent to tempor game the system. altern, the new class of onlin mechan[7, 11] assum dynam arriv and departur of bidder and doe not hold auction at fix interv. instead, the mechan is a continu scheme that accept bid as thei arriv and make alloc decis immedi, thu remov ani need to clear auction. the challeng is that the current literatur is still restrict to non-combinatori set. 5. conclus despit initi us a repeat combinatori auction known not to be strategyproof, mirag ha shown signific promis as a vehicl for sensornet testb alloc. the dual observ of signific resourc content and a wide rang of valuat suggest that auction-base scheme can deliv larg improv in aggreg util when compar to tradit approach such as proport share alloc or batch schedul. fulli realiz these gain, howev, requir address kei problem in  strategyproof mechan design and combinatori optim. the tempor natur of comput resourc and the combinatori resourc demand of distribut applic add an addit layer of complex. nevertheless, we  remain optimist and believ that a pragmat mix of theori and practic combin with iter improv on real deploy provid on promis avenu toward bring market-base resourc alloc into the mainstream. 6. refer [1] crossbow corpor. http://www.xbow.com. [2] buyya, r., abramson, d., and giddi, j. nimrodg: an architectur of a resourc manag and schedul system in a global comput grid. in proceed of the 4th intern confer on high perform comput in asia-pacif region (mai 2000). [3] chun, b. n., buonadonna, p., auyoung, a., ng, c., park, d. c., shneidman, j., snoeren, a. c., and vahdat, a. mirag: a microeconom resourc alloc system for sensornet testb. in proceed of the 2nd ieee workshop on embed network sensor (mai 2005). [4] clark, e. h. multipart price of public good. public choic 2 (1971), 19-33. 103 [5] de vri, s., and vohra, r. v. combinatori auction: a survei. inform journal on comput 15 (2003), 284-309. [6] grove, t. incent in team. econometrica 41 (1973), 617-631. [7] hajiaghayi, m. t., kleinberg, r., and park, d. c. adapt limit-suppli onlin auction. in proceed of the 5th acm confer on electron commerc (2004). [8] jackson, m. o. mechan theori. in the encyclopedia of life support system. eolss publish, 2000. [9] lai, k., huberman, b. a., and fine, l. tycoon: a distribut market-base resourc alloc system. tech. rep., hewlett packard, 2004. [10] lavi, r., mu"alem, a., and nisan, n. toward a character of truth combinatori auction. in proceed of the 44th annual symposium on foundat of comput scienc (2003). [11] lavi, r., and nisan, n. competit analysi of incent compat on-line auction. in proceed of the 2nd acm confer on electron commerc (2000), pp. 233-241. [12] lehmann, d., o"callaghan, l. i., and shoham, y. truth revel in approxim effici combinatori auction. journal of the acm 49, 5 (septemb 2002), 577-602. [13] ng, c., park, d. c., and seltzer, m. virtual world: fast and strategyproof auction for dynam resou rce alloc. in proceed of the 4th acm confer on electron commerc (2003). [14] nisan, n. bid and alloc in combinatori auction. in proceed of the 2nd acm confer on electron commerc (2000). [15] nisan, n., and ronen, a. algorithm mechan design. in proceed of the 31st annual acm symposium on theori of comput (mai 1999). [16] nisan, n., and ronen, a. computation feasibl vcg mechan. in proceed of the 2nd acm confer on electron commerc (octob 2000). [17] regev, o., and nisan, n. the popcorn market - an onlin market for comput resourc. in proceed of the 1st intern confer on inform and comput economi (octob 1998). [18] varian, h., and macki-mason, j. k. gener vickrei auction. tech. rep., univers of michigan, 1995. [19] vickrei, w. counterspecul, auction and competit seal tender. journal of financ (1961), 8-37. [20] wolski, r., plank, j. s., brevik, j., and bryan, t. analyz market-base resourc alloc strategi for the comput grid. intern journal of high perform comput applic (2001), 258-281. 104 