implement and perform evalu of conflex-g: grid-enabl molecular conform space search program with omnirpc yoshihiro nakajima graduat school of system & inform engin, univers of tsukuba tsukuba, 305-8577, japan yoshihiro@hpc.is.tsukuba.ac.jp mitsuhisa sato institut of inform scienc and electron, univers of tsukuba tsukuba, 305-8577, japan msato@is.tsukuba.ac.jp hitoshi goto knowledg-base inform engin, toyohashi univers of technolog toyohashi, 441-8580, japan gotoh@cochem2.tutki.tut.ac.jp taisuk boku, daisuk takahashi institut of inform scienc and electron, univers of tsukuba tsukuba, 305-8577, japan {taisuk,daisuk}@hpc.is.tsukuba.ac.jp abstract conflex-g is the grid-enabl version of a molecular  conform space search program call conflex. we have implement conflex-g us a grid rpc system call omnirpc. in thi paper, we report the perform of conflex-g in a grid testb of sever geograph distribut pc cluster. in order to explor mani  conform of larg bio-molecul, conflex-g gener trial structur of the molecul and alloc job to  optim a trial structur with a reliabl molecular mechan method in the grid. omnirpc provid a restrict  persist model to support the parametr search applic. in thi model, when the initi procedur is defin in the rpc modul, the modul is automat  initi at the time of invoc by call the initi procedur. thi can elimin unnecessari commun and initi at each call in conflex-g.  conflexg can achiev perform compar to conflex mpi and can exploit more comput resourc by allow the us of a cluster of multipl cluster in the grid. the  experiment result show that conflex-g achiev a speedup of 56.5 time in the case of the 1bl1 molecul, where the molecul consist of a larg number of atom, and each trial structur optim requir signific time. the load imbal of the optim time of the trial structur mai also caus perform degrad. categori and subject descriptor c.2.4 [comput system organ]:  computercommun network-distribut system; j.2.4 [comput applic]: physic scienc and engin gener term design,perform 1. introduct elucid of the stabl conform and the fold process of protein is on of the most fundament and  challeng goal in life scienc. while some of the most  common secondari structur (e.g., certain type of helix, the beta-strand, and the coil) ar well known, precis  analysi of the thousand of chemic import conform and pico-second-order analysi of their conform  interconvers via the transit state on the potenti energi surfac ar requir for the microsecond-order investig of the fold process toward the tertiari structur  format. recent, the concept of the comput grid ha begun to attract signific interest in the field of high-perform network comput. rapid advanc in wide-area  network technolog and infrastructur have made it possibl to construct larg-scale, high-perform distribut  comput environ, or comput grid, that provid  depend, consist and pervas access to enorm  comput resourc. conflex is on of the most effici and reliabl  conform space search program[1]. we have appli thi 154 program to parallel us global comput. the  perform of the parallel conflex enabl explor of the lower-energi region of the conform space of small peptid within an avail elaps time us a local pc cluster. sinc trial structur optim in conflex is calcul via molecular mechan, conform space search can be perform quickli compar to that us molecular orbit calcul. although the parallel version of conflex wa us to calcul in parallel the structur optim, which take up over 90% of the process in the molecular  conform search, suffici improv in the speedup could not be achiev by thi method alon. therefor, for high polym from live organ, such as hiv proteas, the us on pc cluster is insuffici due to the requir for optim of a huge number of trial structur. thi requir the vast comput resourc of a grid comput environ. in thi paper, we describ conflex-g, a grid-enabl molecular conform search program, us omnirpc and report it perform in a grid of sever pc  cluster which ar geograph distribut. the prototyp conflex-g alloc calcul trial structur  optim, which is a veri time-consum task, to worker node in the grid environ in order to obtain high throughput. in addit, we compar the perform of conflex-g in a local pc cluster to that in a grid testb. omnirpc[2, 3, 4] is a thread-safe implement of ninf rpc[5, 6] which is a grid rpc facil for grid  environ comput. sever system adopt the concept of the rpc as the basic model for grid environ comput, includ ninf-g[7], netsolv[8] and corba[9]. the  rpcstyle system provid an easi-to-us, intuit program interfac, allow user of the grid system to easili  creat grid-enabl applic. in order to support parallel program, an rpc client can issu asynchron call request to a differ remot comput to exploit  networkwid parallel via omnirpc. in thi paper, we propos the omnirpc persist model to a grid rpc system and demonstr it effect. in order to support a typic applic for a grid  environ, such as a parametr search applic, in which the same function is execut with differ input paramet on the same data set. in the current gridrpc system[10], the data set by the previou call cannot be us by subsequ call. in the omnirpc system, onc a remot execut is invok, the client attempt to us the invok remot execut and it initi state for subsequ rpc call to the same remot function in order to elimin the  invoc cost of each call. thi paper demonstr that conflex-g is abl to  exploit the huge comput resourc of a grid environ and search larg-scale molecular conform. we  demonstr conflex-g on our grid testb us the actual protein as a sampl molecul. the omnirpc facil of the automat initializ modul (aim) allow the system to effici calcul numer conform. furthermor, by us omnirpc, the user can grid-parallel the exist applic, and move from the cluster to the grid  environ without modifi program code and compil the program. in addit, the user can easili build a privat grid environ. the rest of thi paper is organ as follow. an overview select of initi structur conform databas local perturb geometri optim comparison and registr figur 1: algorithm of conform space search in the origin conflex. of the conflex system is present in section2, and the implement and design of conflex-g ar describ in section 3. we report experiment result obtain us conflex-g and discuss it perform in section 4. in section 6, we present conclus and discuss subject for futur studi. 2. conflex conflex [1] is an effici conform space search program, which can predomin and exhaust search the conform in the lower-energi region. applic of conflex includ the elucid of the reactiv and  select of drug and possibl drug materi with regard to their conform flexibl. 2.1 algorithm of conformationalspacesearch the basic strategi of conflex is an exhaust search of onli the low-energi region. the origin conflex perform the follow four major step: 1. select of an initi structur among the previous discov uniqu conform sort in a  conform databas. (an input structur is us as the first initi structur at the begin of a search  execut onli.) 2. gener of trial structur by local perturb to the select initi structur. 3. geometri optim for the newli gener trial structur. 4. comparison of the successfulli optim (trial)  structur with the other conform store in a  conform databas, and preserv of newli discov uniqu conform in the databas. figur 1 show the outlin of conflex, the origin  conform space search algorithm. these procedur incorpor two uniqu strategi.  figur 2 show the strategi for gener local perturb in conflex. the first strategi involv both corner  flap and edg flip for the ring atom and stepwis  rotat for side-chain or backbon chain. these method provid a highli effici wai to produc sever good trial structur. these perturb can be consid to mimic 155 stepwis rotat corner flap edg flip figur 2: strategi us to gener the local  perturb. a barrier-cross step in the elementari process of the  thermal conform inter-convers. actual, the  perturb of an initi structur correspond to the precis  perform around the space of the initi structur becaus of local and weak of the perturb. the select rule of the initi structur, the  lowestconform-first rule, is the second strategi for direct the conform search expand to the low-energi region. the initi structur is select as the set of lowest energi conform store in the conform databas. thi rule is effect in move down the search space toward lower energi region, like water from a stream run into an empti reservoir, while fill local depress along the wai. therefor, these tactic procedur of the conflex search ar refer to as the reservoir fill algorithm. in order to remain in the low-energi region and perform an exhaust search, the search limit (sel), which  determin the maximum energi of the initi structur, is pre-defin. gradual increas sel allow onli the  lowenergi conform to be search and avoid strai into unnecessarili high-energi region. 2.2 parallel of conflex for cluster for applic to over 100 atom, conflex wa  improv us high-perform parallel comput techniqu. in the conflex search algorithm, the geometri  optim procedur alwai take 95% of the elaps time of the search execut. therefor, we parallel thi  optim us the master/worker parallel techniqu. we modifi the search procedur as follow. after trial structur ar gener (step 2), thei ar temporarili store in a task pool on the master node. then, each worker node is dynam suppli with on trial structur from the master node. after an optim on a worker node is finish, the worker is immedi suppli with anoth trial structur. when all of the trial structur relat to a given initi structur ar optim, onli the master  procedur is us in comparison. by parallel conflex, the speedup of search molecular conform obtain is as report in[11]. 3. conflex-g origin, conflex wa intend for us in  explor the conform of the larg bio-molecul, such hiv proteas. in such molecul, the number of trial  structur increas and the time requir for optim of rpc select of initi structur conform databas local perturb comparison and registr client program task pool of geometri optim rpc rpc grid environ cluster b cluster a cluster c trial structuretri structur trial structur trial structur figur 3: procedur of conflex-g. agent rexrex rex client jone.tsukuba.ac.jp hpc-serv.hpcc.jp hpc1 hpc2 hpc3 agent invoc communicationnetwork figur 4: overview of the omnirpc system for the remot cluster have a privat ip address. the trial structur becom immens. we implement the parallel version of conflex, which cannot treat such molecul us onli a local pc cluster. in order to exploit the vast comput resourc of a grid environ, we design and implement conflex-g, which is a grid-enabl version of conflex, with the  omnirpc system. conflex-g alloc job to optim a trial structur to the comput node of each  cluster in the grid environ. figur 3 show the process of conflex-g. the worker program ar initi by the initi method, which is provid by the omnirpc aim facil at worker invoc. at each rpc call, the  initi state is reus on the remot host. in other word, the client program can elimin the initi for each rpc call, and can therefor optim trial structur effici. 3.1 the omnirpc system omnirpc is a grid rpc system which allow seamless parallel program from a pc cluster to a grid  environ. omnirpc inherit it api and basic architectur from ninf. a client and the remot comput host which execut the remot procedur mai be connect via a network. the remot librari ar implement as an  execut program which contain a network stub routin as it main routin. we call thi execut program a remot execut program (rex). when the omnirpc client program start, the  initi function of omnirpc system invok the omnirpc agent program omrpc-agent in the remot host list in the host file. to invok the agent, the user can us the  remot shell command rsh in a local-area network, the gram (globu resourc alloc manag) api of the globu 156 toolkit[12] in a grid environ, or the secur remot shell command ssh. the user can switch the configur onli by chang the host file. omnirpccal is a simpl client program interfac for call remot function. when omnirpccal make a  remot procedur call, the call is alloc to an appropri remot host. when the client issu the rpc request, it request that the agent in the select host submit the job of the remot execut with the local job schedul  specifi in the host file. if the job schedul is not specifi, the agent execut the remot execut in the same node by the fork system call. the client send the data of the input argument to the invok remot execut, and receiv the result upon return of the remot function. onc a  remot execut is invok, the client attempt to us the invok remot execut for subsequ rpc call in order to elimin the cost of invok the same remot execut again. when the agent and the remot execut ar invok, the remot program obtain the client address and port from the argument list and connect back to the client by direct tcp/ip or globu-io for data transmiss. becaus the omnirpc system doe not us ani fix servic port, the client program alloc unus port dynam to wait for connect from the remot execut. thi avoid possibl secur problem, and allow the user to instal the omnirpc system without requir a privileg account. herein, a typic grid resourc is regard as a cluster of geograph distribut pc cluster. for pc cluster on a privat network, an omnirpc agent process on the server host function as a proxi to relai commun between the client and the remot execut by multiplex the commun us a singl connect. thi featur, call multiplex io (mxio), allow a singl client to us up to 1,000 remot comput host. when the pc cluster is insid a firewal, the port forward of ssh enabl the node to commun to the outsid with mxio. figur 4 show the overview of the omnirpc system for a remot cluster with a privat ip address. for parallel program, the programm can us  asynchron remot procedur call, allow the client to issu sever request while continu with other comput. the request ar dispatch to differ remot host to be execut in parallel, and the client wait or poll the  complet request. in such a program model with  asynchron remot procedur call, the programm should handl outstand request explicitli. becaus omnirpc is a thread-safe system, a number of remot procedur call mai be outstand at ani time for multi-thread program written in openmp. 3.2 omnirpc persist model: automat initializ modul omnirpc effici support typic master/worker  parallel applic such as parametr execut program. for parametr search applic, which often requir larg amount of ident data for each call, omnirpc support a limit persist model, which is implement by the  automat initializ modul. the user can defin an  initi procedur in the remot execut in order to send and store data automat in advanc of actual remot procedur call. sinc the remot execut mai accept  request for subsequ call, the data set which ha been set by the initi procedur can be re-us. as a result, the worker program can execut effici and reduc the amount of data transmit for initi. onc a remot execut is invok, the client attempt to us the invok remot execut for subsequ rpc call. howev, omnirpc doe not guarante persist of the remot execut, so that the data set by the  previou call cannot be us by subsequ call. thi is becaus a remot call by omnirpccal mai be schedul to ani  remot host dynam, and remot execut mai be  termin accident due to dynam re-schedul or host fault. howev, persist of the remot execut can be exploit in certain applic. an exampl is a  parametr search applic: in such an applic, it would be effici if a larg set of data could be pre-load by the first call, and subsequ call could be perform on the same data, but with differ paramet. thi is the case for conflex. omnirpc provid a restrict persist model through the automat initializ modul (aim) in order to support thi type of applic. if the initi procedur is  defin in the modul, the modul is automat initi at invoc by call the initi procedur. when the remot execut is re-schedul in differ host, the initi is call to initi the newli alloc  remot modul. thi can elimin unnecessari  commun when rpc call us the same data. to reveal more about the differ in progress between the case with omnirpc aim and without omnirpc aim, we present two figur. figur 5 illustr the time chart of the progress of a typic omnirpc applic us the omnirpc aim facil, and figur 6 illustr the time chart of the same applic without the omnirpc aim facil. in both figur, the line between diamond  repres the process of initi, and the line between point repres the calcul. the bold line indic the time when the client program send the data to a worker program. it is necessari for the applic without the omnirpc aim facil to initi at each rpc. the  applic us the omnirpc aim facil can re-us the initi data onc the data set is initi. thi can reduc the initi at each rpc. the worker of the applic with the aim can calcul effici compar to the applic without the omnirpc aim facil. 3.3 implement of conflex-g us omnirpc figur 3 show an overview of the process us in  conflexg. us rpc, conflex-g alloc the process of trial structur optim, which ar perform by the comput node of a pc cluster in the mpi version of conflex, to the comput node of each cluster in a grid environ. there ar two comput which ar perform by the worker program in conflex-g. on is the initi of a worker program, and anoth is the calcul of trial structur optim. first, the omnirpc facil of the aim is adapt for  initi of a worker program. thi facil automat call the initi function, which is contain in the worker program, onc the client program invok the worker program in a remot node. it is necessari for the common rpc system includ gridrpc to initi a program for everi rpc call, sinc data persist of worker program 157 time client program worker program 1 worker program 2 initi initi calcul calcul calcul calcul calcul parallel us asynchron rpc figur 5: time chart of applic us the omnirpc facil of the automat initializ modul. time client program worker program 1 worker program 2 initi initializationcalcul calcul calcul calcul initi initi initi parallel us asynchron rpc calcul figur 6: time chart of applic without the omnirpc facil of the automat initializ modul. tabl 1: machin configur in the grid testb. site cluster name machin network authent # of node # of cpu univ. of tsukuba denni dual xeon 2.4ghz 1gb ethernet globu, ssh 14 28 alic dual athlon 1800+ 100mb ethernet globu, ssh 18 36 tut toyo dual athlon 2600+ 100mb ethernet ssh 8 16 aist um dual pentium3 1.4ghz 1gb ethernet globu, ssh 32 64 is not support. in omnirpc, howev, when the  initi remot function is defin in the worker program and a new worker program, correspond to the other rpc, is assign to execut, an initi function is call  automat. therefor, after the initi function call to set up common initi data, a worker program can re-us thi data and increas the effici of it"s process. thu, the higher the set-up cost, the greater the potenti benefit. we implement the worker program of conflex-g to receiv data, such as evalu paramet of energi, from a client program and to be initi by the initi function. we arrang the client program of conflex-g to transfer the paramet file at the time of worker  initi. thi enabl execut to be perform by modifi onli the client set if the user want to run conflex-g with a differ data set. second, in order to calcul trial structur optim in a worker program, the worker program must receiv the data, such as the atom arrang of the trial structur and the intern energi state. the result is return to the client program after the worker ha optim the trial structur. sinc the calcul portion of the structur optim in thi worker program can be calcul independ  us differ paramet, we parallel thi portion us asynchron rpc on the client side. to call the structur optim function in a worker program from the client program, we us the omnirpccallasync api, which is  intend for asynchron rpc. in addit, omnirpccallwaital api which wait until all asynchron rpc ar us in  order to perform synchron with all of the asynchron rpc complet so as to optim the trial structur. the client program which assign trial structur optim to the calcul node of a pc cluster us rpc is outlin as follow. omnirpcinit() omnirpcmoduleinit("conflex_search",...); ... while( <new conform> ) { foreach( <trial structur> ) omnirpccallasync("conflex_search_worker", ...); omnirpcwaital(); ... note that omnirpcmoduleinit api return onli the  argument need for initi and will not actual execut the initi function. as describ abov, the  actual initi is perform at the first remot call. sinc the omnirpc system ha an easi round-robin  schedul, we do not have to explicitli write the code for load  balanc. therefor, rpc ar alloc automat to idl worker. 158 tabl 2: network perform between the master node of the denni cluster and the master node of each pc cluster. round-trip throughput cluster time (ms) (mbp) denni 0.23 879.31 alic 0.18 94.12 toyo 11.27 1.53 um 1.07 373.33 4. preliminari result 4.1 grid testb the grid testb wa construct by comput resourc at the univers of tsukuba, the toyohashi univers of technolog (tut) and the nation institut of advanc industri scienc and technolog (aist). tabl 1 show the comput resourc us for the grid of the present studi. the univers of tsukuba and aist ar connect by a 1-gbp tsukuba wan, and the other pc cluster ar  connect by sinet, which is wide-area network dedic to academ research in japan. tabl 2 show the perform of the measur network between the master node of the denni cluster and the master node of each pc cluster in the grid testb. the commun throughput wa  measur us netperf, and the round-trip time wa measur by ping. 4.2 perform of conflex-g in all of the conflex-g experi, the client  program wa execut on the master node of the denni  cluster at the univers of tsukuba. the built-in round-robin schedul of omnirpc wa us as a job schedul. ssh wa us for an authent system, the  ominrpc"s mxio, which relai the i/o commun between client program and worker program by port forward of ssh wa, not us. note that on worker program is  assign and perform on on cpu of the calcul node in a pc cluster. that is, the number of worker is equal to the number of cpu. these program were compil by the intel fortran  compil 7.0 and gcc 2.95. mpich, version 1.2.5, wa us to compar the perform between conflex mpi and conflex-g. in order to demonstr the usabl of the omnirpc facil of the aim, we implement anoth  version of conflex-g which did not util the omnirpc facil. the worker program in thi version of  conflexg must be initi at each rpc becaus the worker doe not hold the previou data set. in order to examin the perform of conflex-g, we select two peptid and two small protein as test molecul: • n-acetyl tetra-alanin methylest (alax04) • n-acetyl hexdeca-alanin methylest (alax16) • trp-cage miniprotein construct tc5b (1l2y) • pth receptor n-terminu fragment (1bl1) tabl 3 list the characterist of these sampl molecul. the column trial structur / loop in thi tabl show the figur 7: perform of conflex-g,  conflex mpi and origin conflex in the denni cluster. figur 8: speedup ratio, which is base on the elaps time of conflex-g us on worker in the denni cluster. figur 9: perform of conflex-g with and without the omnirpc facil of automat  initializ modul for alax16. 159 tabl 3: characterist of molecul and data transmiss for optim trial molecular structur in each molecular code. molecular # of # of total trial trial structur data transfer to data transfer code atom structur / loop initi a worker / trial structur alax04 181 360 45 2033kb 17.00kb alax16 191 480 160 2063kb 18.14kb 1l2y 315 331 331 2099kb 29.58kb 1bl1 519 519 519 2150kb 48.67kb tabl 4: elaps search time for the molecular conform of alax04. total total optim cluster # of structur optim time elaps speed (# of worker) worker / worker time (s) / structur (s) time (s) up denni (sequenti) 1 320.0 1786.21 4.96 1786.21 1.00 toyo (16) 16 20.0 1497.08 4.16 196.32 9.10 denni (28) 28 11.4 1905.51 5.29 97.00 18.41 alic (36) 36 8.9 2055.25 5.71 87.09 20.51 um (56) 56 5.7 2196.77 6.10 120.69 14.80 denni (28) + toyo (16) 44 7.3 1630.09 4.53 162.35 11.00 alic (36) + toyo (16) 52 6.2 1774.53 4.93 178.24 10.02 denni (28) + alic (36) 64 5.0 1999.02 5.55 81.52 21.91 denni (28) + um (56) 84 3.8 2085.84 5.79 92.22 19.37 alic (36) + um (56) 92 3.5 2120.87 5.89 101.25 17.64 tabl 5: elaps search time for the molecular conform of alax16 total total optim cluster # of structur optim time elaps speed (# of worker) worker / worker time (s) / structur (s) time (s) up denni (1) 1 480.0 74027.80 154.22 74027.80 1.00 toyo (16) 16 30.0 70414.21 146.70 4699.15 15.75 denni (28) 28 17.1 74027.80 154.22 3375.60 21.93 alic (36) 36 13.3 90047.27 187.60 3260.41 22.71 um (56) 56 8.6 123399.38 257.08 2913.63 25.41 denni (28) + toyo (16) 44 10.9 76747.74 159.89 2762.10 26.80 alic (36) + toyo (16) 52 9.2 82700.44 172.29 2246.73 32.95 denni (28) + alic (36) 64 7.5 87571.30 182.44 2051.50 36.08 toyo (16) + um (56) 72 6.7 109671.32 228.48 2617.85 28.28 denni (28) + um (56) 84 5.7 102817.90 214.20 2478.93 29.86 denni(28)+um(56)+toyo(16) 100 4.8 98238.07 204.66 2478.93 29.86 tabl 6: elaps time of the search for the trial structur of 1l2y. cluster total # of structur optim time elaps elaps speed (# of worker) worker / worker / structur (s) time (s) time (h) up toyo mpi (1) 1 331.0 867 286,967 79.71 1.00 toyo mpi (16) 16 20.7 867 18,696 5.19 15.34 denni (28) 28 11.8 803 14,101 3.91 20.35 denni (28) + um(56) 84 3.9 1,064 8,316 2.31 34.50 tabl 7: elaps time of the search for the trial structur of 1bl1. cluster total # of structur optim time elaps elaps speed (# of worker) worker / worker / structur (s) time (s) time (h) up toyo mpi (1) 1 519.0 3,646 1892,210 525.61 1.00 toyo mpi (16) 16 32.4 3,646 120,028 33.34 15.76 denni (28) 28 18.5 3,154 61,803 17.16 30.61 denni (28) + um (56) 84 6.1 4,497 33,502 9.30 56.48 160 number of trial structur gener in each iter,  indic the degre of parallel. figur 3 also summar the amount of data transmiss requir for initi of a worker program and for optim of each trial  structur. note that the amount of data transmiss, which is requir in order to initi a worker program and optim a trial structur in the mpi version of conflex, is equal to that of conflex-g. we us an improv version of mm2 forc field to assign a potenti energi function to variou geometr properti of a group of atom. 4.2.1 perform in a local cluster we first compar the perform of conflex-g, the mpi version of conflex, and the origin sequenti  version of conflex-g us a local cluster. we investig perform by vari the number of worker us the denni cluster. we chose alax04 as a test molecul for thi experi. figur 7 compar the result for the  conflex mpi and conflex-g in a local pc cluster. the result of thi experi show that conflex-g can reduc the execut time as the number of worker increas, as in the mpi version of conflex. we found that conflex-g achiev effici compar to the mpi version. with 28 worker, conflex-g achiev an 18.00 time speedup compar to the conflex  sequenti version. the perform of conflex-g without the omnirpc aim facil is wors than that of  conflexg us the facil, base on the increas in the number of worker. thi indic that the omnirpc aim enabl the worker to calcul effici without other calcul, such initi or invoc of worker program. as the number of worker is increas, the perform of conflex-g is a slightli lower than that of the mpi  version. thi perform degrad is caus by differ in the worker initi process of conflex-g and conflex mpi. in the case of conflex mpi, all worker ar initi in advanc of the optim phase. in the case of ominrpc, the worker is invok on-demand when the rpc call is actual issu. therefor, the initi incur thi overhead. sinc the object of conflex-g is to explor the  conform of larg bio-molecul, the number of trial  structur and the time to optim the trial structur might be larg. in such case, the overhead to invok and initi the worker program can be small compar to the entir elaps time. 4.2.2 perform for peptid in the grid testb first, the sampl molecul (alax04 and alax16) were us to examin the conflex-g perform in a grid environ. figur 8 show the speedup achiev by us multipl cluster compar to us on worker in the denni cluster. detail result ar shown in tabl 4 and tabl 5. in both case, the best perform wa obtain us 64 worker of the combin of the denni and alic  cluster. conflex-g achiev a maximum speedup of 36.08 time for alax04 and a maximum speedup of 21.91 time for alax16. in the case of alax04, the perform is improv onli when the network perform between cluster is high. howev, even if two or more cluster ar us in a wide area network environ, the perform improv wa slight becaus the optim time of on trial  structur gener from alax04, a small molecul, is short. in addit, the overhead requir for invoc of a worker program and network data transmiss consum a larg portion of the remain process time. in particular, the data transmiss requir for the initi of a worker program is 2 mb. in the case of toyo cluster, where the network perform between the client program and the worker program is poor, the time of data transmiss to the worker program requir approxim 6.7 second. sinc thi transmiss time wa longer than the process time of on structur optim in conflex-g, most of the time wa spent for thi data transmiss.  therefor, even if conflex-g us a larg number of  calcul node in a wide area network environ, the benefit of us a grid resourc is not obtain. in the case of alax16, conflex-g achiev a speedup by us two or more pc cluster in our grid testb. thi wa becaus the calcul time on the worker program wa long and the overhead, such as network latenc and the invok of worker program, becam rel small and could be hidden. the best perform wa obtain us 64 worker in the denni and alic cluster. in the case of aax16, the achiev perform wa a speedup of 36.08 time. figur 9 reveal the effect of us the facil of the  omnirpc aim on conflex-g perform. in most case, conflex-g with the omnirpc aim facil archiv  better perform than conflex-g without the facil. in particular, the omnirpc aim facil wa advantag when us two cluster connect by a low-perform network. the result indic that the omnirpc aim  facil can improv perform in the grid environ. 4.2.3 performanceforsmallproteininthegridtestb final, we explor the molecular conform us conflex-g for larg molecul. in a grid environ, thi experi wa conduct us the denni and um cluster. in thi experi, we us two protein, 1l2y and 1bl1. tabl 6 and tabl 7 show the perform of conflex-g in the grid environ and that of  conflex mpi in the toyo cluster, respect. the speedup in these tabl were comput respect base on the  perform of on worker and 16 worker of the toyo cluster us conflex mpi. conflex-g with 84 worker in denni and um cluster obtain maximum speedup of 56.5 time for 1l2y and 34.5 time for 1l2y. sinc the calcul time for structur  optim requir a great deal of time, the ratio of overhead, includ task such as the invoc of a worker program and data transmiss for initi, becam veri small, so that the perform of conflex-g wa improv. we found that the load imbal in the process time of optim for each trial structur caus perform degrad. when we obtain the best perform for 1l2y us the denni and um cluster, the time for each structur optim vari from 190 to 27,887 second, and the ratio between the longest and shortest time wa 13.4. for 1bl1, the ratio of minimum time over maximum time wa 190. in addit, in order that the worker  program wait until the complet of optim of all trial structur, all worker program were found to wait in an idl state for approxim 6 hour. thi ha caus the perform degrad of conflex-g. 161 4.3 discuss in thi subsect, we discuss the improv of the  perform reflect in our experi. exploit parallel - in order to exploit more  comput resourc, it is necessari to increas the degre of parallel. in thi experi, the degre of parallel wa not so larg in the case of the sampl molecul. when us a set of over 500 comput node for 1bl1, the  number of on trial structur assign to each worker will be onli on or two. if over 100 trial structur ar assign to each worker program, calcul can be perform more effici due to the reduct of the overhead for worker  invoc and initi via the facil of the omnirpc aim. on idea for increas parallel is to overlap the  execut of two or more set of trial structur. in the current algorithm, a set of trial structur is gener from on initi structur and comput until optim for all structur in thi set ar calcul. furthermor, thi will help to improv load imbal. by have other set of trial structur overlap, even if some optim requir a long time, the optim for the structur in other set can be execut to compens for the idl worker for other optim. it is howev unclear how such modif of the algorithm might affect the qualiti of the final result in term of a conform search. improv in load imbal when optim each trial structur - tabl 8 list the statist for optim time of trial structur gener for each sampl molecul  measur us 28 worker in the denni cluster. when two or more set of pc cluster ar us, the speedup in  perform is hamper by the load imbal of the  optim of the trial structur. the longest time for  optim a trial structur wa nearli 24 time longer than the shortest time. furthermor, other worker must wait until the longest job ha finish, so that the entir execut time cannot be reduc. when conflex-g search the conform of 1bl1 by the denni cluster, the longest  calcul time of the trial structur optim made up approxim 80% of the elaps time. therefor, there ar two possibl solut for the load imbal. • it is necessari to refin the algorithm us to gener the trial structur, which suppress the time variat for optim a trial structur in conflex. thi enabl conflex-g to achiev high-throughput by us mani comput resourc. • on of the solut is to overlap the execut for two or more set of trial structur. in the current algorithm, a set of trial structur is gener from on initi structur and calcul continu until all structur in thi set ar calcul. by have other set of trial structur, even if a structur search take a long time, a job can be execut in order to  compens the load imbal by other job. howev, how such modif of the algorithm might affect the effici is not clear. • in thi experi, we us a simpl build-in  roundrobbin schedul of omnirpc, which is necessari in order to appli the schedul that alloc structur with long optim time to a high-perform tabl 8: statist of elaps time of trial structur optim us 28 worker in the denni cluster. molecular min max averag varianc code (s) (s) (s) alax04 2.0 11.3 5.3 3 alax16 47.6 920.0 154.2 5404 1l2y 114.2 13331.4 803.2 636782 1bl1 121.0 29641.8 3153.5 2734811 node and structur with short optim time to low-perform node. in gener, howev, it might be difficult to predict the time requir for trial  structur optim. parallel of the worker program for speedup to  optim a trial structur - in the current implement, we do not parallel the worker program. in order to speed up trial structur, hybrid program us omnirpc and openmp in an smp (symmetr multipl processor)  machin mai be on of the altern method by which to improv overal perform. 5. relat work recent, an algorithm ha been develop that solv the problem of parallel and commun in poorli connect processor to be us for simul. the  fold@home project[13] simul timescal thousand to  million of time longer than previous achiev. thi ha  allow us to simul fold for the first time and to directli examin fold relat diseas. seti@home[14] is a program to search for alien life by analyz radio telescop signal us fourier transform radio telescop data from telescop from differ site. seti@home tackl immens parallel problem, in which calcul can easili be divid among sever comput. radio telescop data chunk can easili be assign to  differ comput. most of these effort explicitli develop a dock  applic as a parallel applic us a special purpos parallel program languag and middlewar, such as mpi, which requir develop skill and effort. howev, the skill and effort requir to develop a grid applic mai not be requir for omnirpc. nimrod/g[15] is a tool for distribut parametr  model and implement a parallel task farm for simul that requir sever vari input paramet. nimrod  incorpor a distribut schedul compon that can manag the schedul of individu experi to idl comput in a local area network. nimrod ha been appli to  applic includ bio-informat, oper research, and molecular model for drug design. netsolv[8] is an rpc facil similar to omnirpc and ninf, provid a similar program interfac and  automat load balanc mechan. ninf-g[7] is a grid-enabl implement of ninf and provid a gridrpc[10] system that us ldap to manag the databas of remot  execut, but doe not support cluster involv privat ip  address or address insid a firewal. matsuoka et al.[16] ha also discuss sever design issu relat to grid rpc system. 162 6. conclus and futur work we have design and implement conflex-g us omnirpc. we report it perform in a grid testb of sever geograph distribut pc cluster. in order to explor the conform of larg bio-molecul,  conflexg wa us to gener trial structur of the molecul, and alloc job to optim them by molecular mechan in the grid. omnirpc provid a restrict persist model so that the modul is automat initi at invoc by call the initi procedur. thi can elimin  unnecessari commun and the initi at each call in conflex-g. conflex-g can achiev perform compar to conflex mpi and exploit more comput resourc by allow the us of multipl pc cluster in the grid. the experiment result show that conflex-g achiev a speedup of 56.5 time for the 1bl1 molecul, where the molecul consist of a larg number of atom and each trial structur optim requir a great deal of time. the load imbal of the trial structur optim mai caus perform degrad. we need to refin the algorithm us to gener the trial structur in order to improv the load balanc optim for trial structur in conflex. futur studi will includ develop of deploy tool and an examin of fault toler. in the  current omnirpc, the registr of an execut program to remot host and deploy of worker program ar  manual set. deploy tool will be requir as the number of remot host is increas. in grid environ in which the environ chang dynam, it is also necessari to support fault toler. thi featur is especi import in larg-scale applic which requir lengthi calcul in a grid environ. we plan to refin the conform optim  algorithm in conflex to explor the conform space search of larger bio-molecul such hiv proteas us up to 1000 worker in a grid environ. 7. acknowledg thi research wa support in part by a grant-in-aid from the ministri of educ, cultur, sport, scienc and technolog in japan, no. 14019011, 2002, and as part of the program of research and develop for appli advanc comput scienc and technolog by the japan scienc and technolog corpor (research on the grid comput platform for drug design). we would like to thank grid technolog research center, aist, japan for provid comput resourc for our experi. 8. refer [1] h. goto and e. osawa. an effici algorithm for search low-energi conform of cyclic and acycl molecul. j. chem. soc., perkin tran, 2:187-198, 1993. [2] m. sato, t. boku, and d. takahashi. omnirpc: a grid rpc system for parallel program in cluster and grid environ. in proc. of ccgrid2003, page 219-229, 2003. [3] m. sato, m. hirano, y. tanaka, and s. sekiguchi. omnirpc: a grid rpc facil for cluster and global comput in openmp. in proc. of workshop on openmp applic and tool 2001(lnc 2104 ), page 130-135, 2001. [4] omnirpc project. http://www.omni.hpcc.jp/omnirpc/. [5] m. sato, h. nakada, s. sekiguchi, s. matsuoka, u. nagashima, and h. takagi. ninf: a network base inform librari for global world-wide comput infrastructur. in hpcn europ, page 491-502, 1997. [6] ninf project. http://ninf.apgrid.org/. [7] y. tanaka, h. nakada, s. sekiguchi, t. suzumura, and s. matsuoka. ninf-g: a refer implement of rpc-base program middlewar for grid comput . journal of grid comput, 1(1):41-51, 2003. [8] d. arnold, s. agraw, s. blackford, j. dongarra, m. miller, k. seymour, k. sagi, z. shi, and s. vadhiyar. user" guid to netsolv v1.4.1. innov comput dept. technic report icl-ut-02-05, univers of tennesse, knoxvil, tn, june 2002. [9] object manag group. http://www.omg.org/. [10] k. seymour, h. nakada, s. matsuoka, j. dongarra, c. lee, and h. casanova. gridrpc: a remot procedur call api for grid comput. [11] h.goto, t. takahashi, y. takata, k. ohta, and u nagashima. conflex: conform behavior of polypeptid as predict by a conform space search. in nanotech2003, volum 1, page 32-35, 2003. [12] i. foster and c. kesselman. globu: a metacomput infrastructur toolkit. the intern journal of supercomput applic and high performanc e comput, 11(2):115-128, summer 1997. [13] stefan m. larson, christoph d. snow, michael shirt, and vijai s. pand. fold@home and genom@home: us distribut comput to tackl prev iousli intract problem in comput biologi. comput genom, 2002. [14] seti@home project. http://setiathom.ssl.berkelei.edu/. [15] r. buyya, k. branson, j. giddi, and d. abramson. the virtual laboratori: a toolset to enabl distribut molecular model for drug design on the world-wide grid. concurr and comput: practic and experi, 15(1):1-25, januari 2003. [16] s. matsuoka, h. nakada, m. sato, and s. sekiguchi. design issu of network enabl server system for the grid. in proc. of grid 2000 (lnc 1971), page 4-17, 2000. 163 