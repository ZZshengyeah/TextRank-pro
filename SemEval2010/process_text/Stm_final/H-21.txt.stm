robust classif of rare queri us web knowledg andrei broder, marcu fontoura, evgenii gabrilovich, amruta joshi, vanja josifovski, tong zhang yahoo! research, 2821 mission colleg blvd, santa clara, ca 95054 {broder | marcusf | gabr | amrutaj | vanjaj | tzhang}@yahoo-inc.com abstract we propos a methodolog for build a practic robust queri classif system that can identifi thousand of queri class with reason accuraci, while deal in  realtim with the queri volum of a commerci web search  engin. we us a blind feedback techniqu: given a queri, we determin it topic by classifi the web search result retriev by the queri. motiv by the need of search  advertis, we primarili focu on rare queri, which ar the hardest from the point of view of machin learn, yet in  aggreg account for a consider fraction of search engin traffic. empir evalu confirm that our methodolog yield a consider higher classif accuraci than  previous report. we believ that the propos methodolog will lead to better match of onlin ad to rare queri and overal to a better user experi. categori and subject descriptor h.3.3 [inform storag and retriev]: inform search and retriev- relev feedback, search process gener term algorithm, measur, perform, experiment 1. introduct in it 12 year lifetim, web search had grown  tremend: it ha simultan becom a factor in the daili life of mayb a billion peopl and at the same time an eight billion dollar industri fuel by web advertis. on thing, howev, ha remain constant: peopl us veri short queri. variou studi estim the averag length of a search queri between 2.4 and 2.7 word, which by all  account can carri onli a small amount of inform.  commerci search engin do a remark good job in  interpret these short string, but thei ar not (yet!) omnisci. therefor, us addit extern knowledg to augment the queri can go a long wai in improv the search result and the user experi. at the same time, better understand of queri  mean ha the potenti of boost the econom underpin of web search, name, onlin advertis, via the sponsor search mechan that place relev advertis  alongsid search result. for instanc, know that the queri sd450 is about camera while nc4200 is about laptop can obvious lead to more focus advertis even if no advertis ha specif bidden on these particular queri. in thi studi we present a methodolog for queri  classif, where our aim is to classifi queri onto a commerci taxonomi of web queri with approxim 6000 node. given such classif, on can directli us them to  provid better search result as well as more focus ad. the problem of queri classif is extrem difficult ow to the breviti of queri. observ, howev, that in mani case a human look at a search queri and the search queri  result doe remark well in make sens of it. of cours, the sheer volum of search queri doe not lend itself to human supervis, and therefor we need altern sourc of knowledg about the world. for instanc, in the exampl abov, sd450 bring page about canon camera, while nc4200 bring page about compaq laptop, henc to a human the intent is quit clear. search engin index coloss amount of inform, and as such can be view as veri comprehens repositori of knowledg. follow the heurist describ abov, we  propos to us the search result themselv to gain addit insight for queri interpret. to thi end, we emploi the pseudo relev feedback paradigm, and assum the top search result to be relev to the queri. certainli, not all result ar equal relev, and thu we us  elabor vote scheme in order to obtain reliabl knowledg about the queri. for the purpos of thi studi we first  dispatch the given queri to a gener web search engin, and collect a number of the highest-score url. we crawl the web page point by these url, and classifi these page. final, we us these result-page classif to classifi the origin queri. our empir evalu confirm that us web search result in thi manner yield substanti improv in the accuraci of queri classif. note that in a practic implement of our  methodolog within a commerci search engin, all index page can be pre-classifi us the normal text-process and index pipelin. thu, at run-time we onli need to run the vote procedur, without do ani crawl or  classif. thi addit overhead is minim, and therefor the us of search result to improv queri classif is entir feasibl in run-time. anoth import aspect of our work li in the choic of queri. the volum of queri in todai"s search engin follow the familiar power law, where a few queri appear veri often while most queri appear onli a few time. while individu queri in thi long tail ar rare, togeth thei account for a consider mass of all search. furthermor, the aggreg volum of such queri provid a substanti opportun for incom through on-line advertis.1 search and advertis platform can be train to yield good result for frequent queri, includ auxiliari data such as map, shortcut to relat structur  inform, success ad, and so on. howev, the tail queri simpli do not have enough occurr to allow statist learn on a per-queri basi. therefor, we need to  aggreg such queri in some wai, and to reason at the level of aggreg queri cluster. a natur choic for such  aggreg is to classifi the queri into a topic taxonomi. know which taxonomi node ar most relev to the given queri will aid us to provid the same type of support for rare queri as for frequent queri. consequ, in thi work we focu on the classif of rare queri, whose correct classif is like to be particularli benefici. earli studi in queri interpret focus on queri augment through extern dictionari [22]. more  recent studi [18, 21] also attempt to gather some  addit knowledg from the web. howev, these  studi had a number of shortcom, which we overcom in thi paper. specif, earlier work in the field us veri small queri classif taxonomi of onli a few dozen of node, which do not allow ampl specif for onlin  advertis [11]. thei also us a separ ancillari taxonomi for web document, so that an extra level of indirect had to be emploi to establish the correspond between the ancillari and the main taxonomi [18]. the main contribut of thi paper ar as follow. first, we build the queri classifi directli for the target  taxonomi, instead of us a secondari auxiliari structur; thi greatli simplifi taxonomi mainten and develop. the taxonomi us in thi work is two order of  magnitud larger than that us in prior studi. the  empir evalu demonstr that our methodolog for  us extern knowledg achiev greater improv than those previous report. sinc our taxonomi is  consider larger, the classif problem we face is much more difficult, make the improv we achiev particularli notabl. we also report the result of a thorough  empir studi of differ vote scheme and differ depth of knowledg (e.g., us search summari vs. entir crawl page). we found that crawl the search result yield deeper knowledg and lead to greater improv than mere summari. thi result is in contrast with prior  find in queri classif [20], but is support by research in mainstream text classif [5]. 2. methodolog our methodolog ha two main phase. in the first phase, 1 in the abov exampl, sd450 and nc4200 repres fairli old gadget model, and henc there ar advertis place ad on these queri. howev, in thi paper we mainli deal with rare queri which ar extrem difficult to match to relev ad. we construct a document classifi for classifi search  result into the same taxonomi into which queri ar to be classifi. in the second phase, we develop a queri classifi that invok the document classifi on search result, and us the latter to perform queri classif. 2.1 build the document classifi in thi work we us a commerci classif taxonomi of approxim 6000 node us in a major us search  engin (see section 3.1). human editor popul the  taxonomi node with label exampl that we us as train instanc to learn a document classifi in phase 1. given a taxonomi of thi size, the comput  effici of classif is a major issu. few machin  learn algorithm can effici handl so mani differ  class, each have hundr of train exampl. suitabl candid includ the nearest neighbor and the naiv bay classifi [3], as well as prototyp format method such as rocchio [15] or centroid-base [7] classifi. a recent studi [5] show centroid-base classifi to be both  effect and effici for larg-scale taxonomi and  consequ, we us a centroid classifi in thi work. 2.2 queri classif by search have develop a document classifi for the queri  taxonomi, we now turn to the problem of obtain a  classif for a given queri base on the initi search result it yield. let"s assum that there is a set of document d = d1 . . . dm index by a search engin. the search engin can then be repres by a function f = similar(q, d) that quantifi the affin between a queri q and a  document d. exampl of such affin score us in thi paper ar rank-the rank of the document in the order list of search result; static score-the score of the good of the page regardless of the queri (e.g., pagerank); and  dynam score-the close of the queri and the document. queri classif is determin by first evalu  condit probabl of all possibl class p(cj|q), and then select the altern with the highest probabl cmax = arg maxcj ∈c p(cj|q). our goal is to estim the condit probabl of each possibl class us the search result initi return by the queri. we us the follow formula that incorpor classif of individu search result: p(cj|q) = d∈d p(cj|q, d)· p(d|q) = d∈d p(q|cj, d) p(q|d) · p(cj|d)· p(d|q). we assum that p(q|cj, d) ≈ p(q|d), that is, a  probabl of a queri given a document can be determin without know the class of the queri. thi is the case for the major of queri that ar unambigu. counter  exampl ar queri like "jaguar" (anim and car brand) or  "appl" (fruit and comput manufactur), but such  ambigu queri can not be classifi by definit, and usual consist of common word. in thi work we concentr on rare queri, that tend to contain rare word, be longer, and match fewer document; consequ in our set thi  assumpt mostli hold. us thi assumpt, we can write p(cj|q) = d∈d p(cj|d)· p(d|q). the condit  probabl of a classif for a given document p(cj|d) is estim us the output of the document classifi  (section 2.1). while p(d|q) is harder to comput, we consid the underli relev model for rank document given a queri. thi issu is further explor in the next section. 2.3 classif-base relev model in order to describ a formal relationship of classif and ad placement (or search), we consid a model for us classif to determin ad (or search) relev. let a be an ad and q be a queri, we denot by r(a, q) the relev of a to q. thi number indic how relev the ad a is to queri q, and can be us to rank ad a for a given queri q. in thi paper, we consid the follow approxim of relev function: r(a, q) ≈ rc (a, q) = cj ∈c w(cj)s(cj, a)s(cj, q). (1) the right hand-side express how we us the  classif scheme c to rank ad, where s(c, a) is a score function that specifi how like a is in class c, and s(c, q) is a  score function that specifi how like q is in class c. the valu w(c) is a weight term for categori c, indic the import of categori c in the relev formula. thi relev function is an adapt of the tradit word-base retriev rule. for exampl, we mai let  categori be the word in the vocabulari. we take s(cj, a) as the word count of cj in a, s(cj, q) as the word count of cj in q, and w(cj) as the idf term weight for word cj. with such choic, the method given by (1) becom the standard tfidf retriev rule. if we take s(cj, a) = p(cj|a), s(cj, q) = p(cj|q), and w(cj) = 1/p(cj), and assum that q and a ar  independ gener given a hidden concept c, then we have rc (a, q) = cj ∈c p(cj|a)p(cj|q)/p(cj) = cj ∈c p(cj|a)p(q|cj)/p(q) = p(q|a)/p(q). that is, the ad ar rank accord to p(q|a). thi  relev model ha been emploi in variou statist  languag model techniqu for inform retriev. the  intuit can be describ as follow. we assum that a person search an ad a by construct a queri q: the person first pick a concept cj accord to the weight p(cj|a), and then construct a queri q with probabl p(q|cj) base on the concept cj. for thi queri gener process, the ad can be rank base on how like the observ queri is gener from each ad. it should be mention that in our case, each queri and ad can have multipl categori. for simplic, we denot by cj a random variabl indic whether q belong to categori cj. we us p(cj|q) to denot the probabl of q belong to categori cj. here the sum cj ∈c p(cj|q) mai not equal to on. we then consid the follow rank formula: rc (a, q) = cj ∈c p(cj|a)p(cj|q). (2) we assum the estim of p(cj|a) is base on an exist text-categor system (which is known). thu, we onli need to obtain estim of p(cj|q) for each queri q. equat (2) is the ad relev model that we consid in thi paper, with unknown paramet p(cj|q) for each queri q. in order to obtain their estim, we us search result from major us search engin, where we assum that the rank formula in (2) give good rank for search. that is, top result rank by search engin should also be rank high by thi formula. therefor given a queri q, and top k result page d1(q), . . . , dk (q) from a major search engin, we fit paramet p(cj|q) so that rc (di(q), q) have high score for i = 1, . . . , k. it is worth mention that us thi method we can onli comput rel strength of p(cj|q), but not the scale, becaus scale doe not affect rank. moreov, it is possibl that the paramet estim mai be of the form g(p(cj|q)) for some monoton function g(·) of the actual condit probabl g(p(cj|q)). although thi mai chang the mean of the unknown paramet that we estim, it doe not affect the qualiti of us the formula to rank ad. nor doe it affect queri classif with appropri chosen threshold. in what follow, we consid two method to comput the classif  inform p(cj|q). 2.4 the vote method we would like to comput p(cj|q) so that rc (di(q), q) ar high for i = 1, . . . , k and rc (d, q) ar low for a  random document d. assum that the vector [p(cj|d)]cj ∈c is random for an averag document, then the condit that cj ∈c p(cj|q)2 is small impli that rc (d, q) is also small averag over d. thu, a natur method is to maxim k i=1 wirc (di(q), q) subject to cj ∈c p(cj|q)2 be small, where wi ar weight associ with each rank i: max [p (·|q)]   1 k k i=1 wi cj ∈c p(cj|di(q))p(cj|q) − λ cj ∈c p(cj|q)2   , where we assum k i=1 wi = 1, and λ > 0 is a tune regular paramet. the optim solut is p(cj|q) = 1 2λ k i=1 wip(cj|di(q)). sinc both p(cj|di(q)) and p(cj|q) belong to [0, 1], we mai just take λ = 0.5 to align the scale. in the experi, we will simpli take uniform weight wi. a more complex strategi is to let w depend on d as well: p(cj|q) = d w(d, q)g(p(cj|d)), where g(x) is a certain transform of x. in thi gener formul, w(d, q) mai depend on factor other than the rank of d in the search engin result for q. for exampl, it mai be a function of r(d, q) where r(d, q) is the relev score return by the underli search  engin. moreov, if we ar given a set of hand-label train categori/queri pair (c, q), then both the weight w(d, q) and the transform g(·) can be learn us standard classif techniqu. 2.5 discrimin classif we can treat the problem of estim p(cj|q) as a classif problem, where for each q, we label di(q) for i = 1, . . . , k as posit data, and the remain document as neg data. that is, we assign label yi(q) = 1 for di(q) when i ≤ k, and label yi(q) = −1 for di(q) when i > k. in thi set, the classif score rule for a  document di(q) is linear. let xi(q) = [p(cj|di(q))], and w = [p(cj|q)], then cj ∈c p(cj|q)p(cj|di(q)) = w·xi(q). the valu p(cj|d) ar the featur for the linear classifi, and [p(cj|d)] is the weight vector, which can be comput  us ani linear classif method. in thi paper, we  consid estim w us logist regress [17] as follow: p(·|q) = arg minw i ln(1 + e−w·xi(q)yi(q) ). 0 200 400 600 800 1000 1200 1400 1600 1800 2000 0 1 2 3 4 5 6 7 8 9 10 numberofcategori taxonomi level figur 1: number of categori by level 3. evalu in thi section, we evalu our methodolog that us web search result for improv queri classif. 3.1 taxonomi our choic of taxonomi wa guid by a web  advertis applic. sinc we want the class to be us for match ad to queri, the taxonomi need to be  elabor enough to facilit ampl classif specif. for exampl, classifi all medic queri into on node will like result in poor ad match, as both sore foot and flu queri will end up in the same node. the ad  appropri for these two queri ar, howev, veri differ. to avoid such situat, the taxonomi need to provid  suffici discrimin between common commerci topic. therefor, in thi paper we emploi an elabor taxonomi of approxim 6000 node, arrang in a hierarchi with median depth 5 and maximum depth 9. figur 1 show the distribut of categori by taxonomi level. human  editor popul the taxonomi with label queri (approx. 150 queri per node), which were us as a train set; a small fraction of queri have been assign to more than on categori. 3.2 digress: the basic of sponsor search to discuss our set of evalu queri, we need a brief  introduct to some basic concept of web advertis.  sponsor search (or paid search) advertis is place textual ad on the result page of web search engin, with ad  be driven by the origin queri. all major search  engin (googl, yahoo!, and msn) support such ad and act simultan as a search engin and an ad agenc. these textual ad ar character by on or more bid phrase repres those queri where the advertis would like to have their ad displai. (the name bid phrase come from the fact that advertis bid variou amount to secur their posit in the tower of ad associ to a queri. a discuss of bid and placement mechan is beyond the scope of thi paper [13]. howev, mani search do not explicitli us phrase that someon bid on. consequ, advertis also bui broad match, that is, thei pai to place their advertis on queri that constitut some modif of the desir bid phrase. in broad match, sever syntact modif can be appli to the queri to match it to the bid phrase, e.g., drop or ad word, synonym substitut, etc. these transform ar base on rule and dictionari. as advertis tend to cover high-volum and high-revenu queri, broad-match queri fall into the tail of the  distribut with respect to both volum and revenu. 3.3 data set we us two repres set of 1000 queri. both set contain queri that cannot be directli match to  advertis, that is, none of the queri contain a bid phrase (thi mean we elimin practic all popular queri). the first set of queri can be match to at least on ad us broad match as describ abov. queri in the second set cannot be match even by broad match, and therefor the search engin us in our studi doe not current  displai ani advertis for them. in a sens, these ar even more rare queri and further awai from common queri. as a measur of queri rariti, we estim their frequenc in a month worth of queri log for a major us search  engin; the median frequenc wa 1 for queri in set 1 and 0 for queri in set 2. the queri in the two set differ in their classif difficulti. in fact, queri in set 2 ar difficult to interpret even for human evalu. queri in set 1 have on averag 3.50 word, with the longest on have 11 word; queri in set 2 have on averag 4.39 word, with the longest queri of 81 word. recent studi estim the averag length of web queri to be just under 3 word2 , which is lower than in our test set. as anoth measur of queri difficulti, we measur the fraction of queri that contain quotat mark, as the latter assist queri interpret by  meaningfulli group the word. onli 8% queri in set 1 and 14% in set 2 contain quotat mark. 3.4 methodolog and evalu metric the two set of queri were classifi into the target  taxonomi us the techniqu present in section 2. base on the confid valu assign, the top 3 class for each queri were present to human evalu. these  evalu were train editori staff who possess knowledg about the taxonomi. the editor consid everi  queryclass pair, and rate them on the scale 1 to 4, with 1  mean the classif is highli relev and 4 mean it is irrelev for the queri. about 2.4% queri in set 1 and 5.4% queri in set 2 were judg to be unclassifi (e.g., random string of charact), and were consequ  exclud from evalu. to comput evalu metric, we treat classif with rate 1 and 2 to be correct, and those with rate 3 and 4 to be incorrect. we us standard evalu metric: precis, recal and f1. in what follow, we plot precis-recal graph for all the experi. for comparison with other publish  studi, we also report precis and f1 valu correspond to complet recal (r = 1). ow to the lack of space, we onli show graph for queri set 1; howev, we show the numer result for both set in the tabl. 3.5 result we compar our method to a baselin queri classifi that doe not us ani extern knowledg. our baselin classifi expand queri us standard queri expans techniqu, group their term us a phrase recogn, boost certain phrase in the queri base on their  statist properti, and perform classif us the 2  http://www.rankstat.com/html/en/seo-new1-most-peopleus-2-word-phrase-in-search-engin.html 0.4 0.5 0.6 0.7 0.8 0.9 1 1.00.90.80.70.60.50.40.30.20.1 precis recal baselin engin a full-page engin a summari engin b full-page engin b summari figur 2: the effect of extern knowledg nearest-neighbor approach. thi baselin classifi is  actual a product version of the queri classifi run in a major us search engin. in our experi, we vari valu of pertin  paramet that character the exact wai of us search result. in what follow, we start with the gener assess of the effect of us web search result. we then proce to  explor more refin techniqu, such as us onli search summari versu actual crawl the return url. we also experi with us differ number of search result per queri, as well as with vari the number of classif consid for each search result. for lack of space, we onli show graph for set 1 queri and omit the graph for set 2 queri, which exhibit similar phenomena. 3.5.1 the effect of extern knowledg queri by themselv ar veri short and difficult to  classifi. we us top search engin result for collect  background knowledg for queri. we emploi two major us search engin, and us their result in two wai, either onli summari or the full text of crawl result page. figur 2 and tabl 1 show that such extra knowledg  consider improv classif accuraci. interestingli, we found that search engin a perform consist better with full-page text, while search engin b perform better when summari ar us. engin context prec. f1 prec. f1 set 1 set 1 set 2 set 2 a full-page 0.72 0.84 0.509 0.721 b full-page 0.706 0.827 0.497 0.665 a summari 0.586 0.744 0.396 0.572 b summari 0.645 0.788 0.467 0.638 baselin 0.534 0.696 0.365 0.536 tabl 1: the effect of us extern knowledg 3.5.2 aggreg techniqu there ar two major wai to us search result as  addit knowledg. first, individu result can be classifi separ, with subsequ vote among individu  classif. altern, individu search result can be bundl togeth as on meta-document and classifi as such us the document classifi. figur 3 present the result of these two approach when full-text page ar us, the techniqu us individu classif of search result evid outperform the bundl approach by a wide margin. howev, in the case of summari, bundl togeth is found to be consist better than individu classif. thi is becaus summari by themselv ar too short to be classifi correctli individu, but when bundl togeth thei ar much more stabl. 0.4 0.5 0.6 0.7 0.8 0.9 1 1.00.90.80.70.60.50.40.30.20.1 precis recal baselin bundl full-page vote full-page bundl summari vote summari figur 3: vote vs. bundl 3.5.3 full page text vs. summari to summar the two preced section, background knowledg for each queri is obtain by us either the full-page text or onli the summari of the top search  result. full page text wa found to be more in conjunct with vote classif, while summari were found to be us when bundl togeth. the best result overal were obtain with full-page result classifi individu, with subsequ vote us to determin the final queri  classif. thi observ differ from find by shen et al. [20], who found summari to be more us. we attribut thi distinct to the fact that the queri we us in thi studi ar tail on, which ar rare and difficult to classifi. 3.5.4 vari the number of class per search result we also vari the number of classif per search  result, i.e., each result wa permit to have either 1, 3, or 5 class. figur 4 show the correspond precis-recal graph for both full-page and summari-onli set. as can be readili seen, all three variant produc veri similar  result. howev, the precis-recal curv for the 1-class  experi ha higher fluctuat. us 3 class per search result yield a more stabl curv, while with 5 class per result the precis-recal curv is veri smooth. thu, as we increas the number of class per result, we observ higher stabil in queri classif. 3.5.5 vari the number of search result obtain we also experi with differ number of search result per queri. figur 5 and tabl 2 present the result of thi experi. in line with our intuit, we observ that classif accuraci steadili rise as we increas the number of search result us from 10 to 40, with a slight drop as we continu to us even more result (50). thi is becaus us too few search result provid too littl extern knowledg, while us too mani result introduc extra nois. us pair t-test, we assess the statist signific 0.4 0.5 0.6 0.7 0.8 0.9 1 1.00.90.80.70.60.50.40.30.20.1 precis recal baselin 1 class full-page 3 class full-page 5 class full-page 1 class summari 3 class summari 5 class summari figur 4: vari the number of class per page 0.4 0.5 0.6 0.7 0.8 0.9 1 1.00.90.80.70.60.50.40.30.20.1 precis recal 10 20 30 40 50 baselin figur 5: vari the number of result per queri of the improv due to our methodolog versu the baselin. we found the result to be highli signific (p < 0.0005), thu confirm the valu of extern knowledg for queri classif. 3.6 vote versu altern method as explain in section 2.2, on mai us sever method to classifi queri from search engin result base on our relev model. as we have seen, the vote method work quit well. in thi section, we compar the perform of vote top-ten search result to the follow two method: • a: discrimin learn of queri-classif base on logist regress, describ in section 2.5. • b: learn weight base on qualiti score return by a search engin. we discret the qualiti score s(d, q) of a queri/document pair into {high, medium, low}, and learn the three weight w on a set of train queri, and test the perform on holdout queri. the classif formula, as explain at the end of section 2.4, is p(cj|q) = d w(s(d, q))p(cj|d). method b requir a train/test split. neither vote nor method a requir such a split; howev, for consist, we randomli draw 50-50 train/test split for ten time, and report the mean perform ± standard deviat on the test-split for all three method. for thi experi, instead of precis and recal, we us dcg-k (k = 1, 5), popular in search engin evalu. the dcg (discount cumul gain) metric, describ in [8], is a rank  measur where the system is ask to rank a set of candid (in number of result precis f1 baselin 0.534 0.696 10 0.706 0.827 20 0.751 0.857 30 0.796 0.886 40 0.807 0.893 50 0.798 0.887 tabl 2: vari the number of search result our case, judg categori for each queri), and comput for each queri q: dcgk(q) = k i=1 g(ci(q))/ log2(i + 1), where ci(q) is the i-th categori for queri q rank by the system, and g(ci) is the grade of ci: we assign grade of 10, 5, 1, 0 to the 4-point judgment scale describ earlier to comput dcg. the decai choic of log2(i + 1) is  convent, which doe not have particular import. the overal dcg of a system is the averag dcg over queri. we us thi metric instead of precis/recal in thi  experi becaus it can directli handl multi-grade output. therefor as a singl metric, it is conveni for compar the method. note that precis/recal curv us in the earlier section yield some addit insight not  immedi appar from the dcg number. set 1 method dcg-1 dcg-5 oracl 7.58 ± 0.19 14.52 ± 0.40 vote 5.28 ± 0.15 11.80 ± 0.31 method a 5.48 ± 0.16 12.22 ± 0.34 method b 5.36 ± 0.18 12.15 ± 0.35 set 2 method dcg-1 dcg-5 oracl 5.69 ± 0.18 9.94 ± 0.32 vote 3.50 ± 0.17 7.80 ± 0.28 method a 3.63 ± 0.23 8.11 ± 0.33 method b 3.55 ± 0.18 7.99 ± 0.31 tabl 3: vote and altern method result from our experi ar given in tabl 3. the oracl method is the best rank of categori for each queri after see human judgment. it cannot be achiev by ani realist algorithm, but is includ here as an absolut  upper bound on dcg perform. the simpl vote method perform veri well in our experi. the more  complic method mai lead to moder perform gain (especi method a, which us discrimin train in section 2.5). howev, both method ar computation more costli, and the potenti gain is minor enough to be neglect. thi mean that as a simpl method, vote is quit effect. we can observ that method b, which us qualiti score return by a search engin to adjust import weight of return page for a queri, doe not yield appreci improv. thi impli that put equal weight  (vote) perform similarli as put higher weight to higher qualiti document and lower weight to lower qualiti  document (method b), at least for the top search result. it mai be possibl to improv thi method by includ other page-featur that can differenti top-rank search  result. howev, the effect will requir further  investig which we did not test. we mai also observ that the perform on set 2 is lower than that on set 1, which mean queri in set 2 ar harder than those in set 1. 3.7 failur analysi we scrutin the case when extern knowledg did not improv queri classif, and identifi three main caus for such lack of improv. (1)queri contain random string, such as telephon number - these queri do not yield coher search result, and so the latter cannot help classif (around 5% of queri were of thi kind). (2) queri that yield no search result at all; there were 8% such queri in set 1 and 15% in set 2. (3) queri  correspond to recent event, for which the search engin did not yet have ampl coverag (around 5% of queri). on notabl exampl of such queri ar entir name of new articl-if the exact articl ha not yet been index by the search engin, search result ar like to be of littl us. 4. relat work even though the averag length of search queri is  steadili increas over time, a typic queri is still shorter than 3 word. consequ, mani research studi possibl wai to enhanc queri with addit inform. on import direct in enhanc queri is through queri expans. thi can be done either us electron dictionari and thesauri [22], or via relev feedback  techniqu that make us of a few top-score search result. earli work in inform retriev concentr on  manual review the return result [16, 15]. howev, the sheer volum of queri nowadai doe not lend itself to manual supervis, and henc subsequ work focus on blind relev feedback, which basic assum top return result to be relev [23, 12, 4, 14]. more recent, studi in queri augment focus on classif of queri, assum such classif to be benefici for more focus queri interpret. inde, kowalczyk et al. [10] found that us queri class  improv the perform of document retriev. studi in the field pursu differ approach for  obtain addit inform about the queri. beitzel et al. [1] us semi-supervis learn as well as unlabel data [2]. gravano et al. [6] classifi queri with respect to geograph local in order to determin whether their intent is local or global. the 2005 kdd cup on web queri classif inspir yet anoth line of research, which focus on enrich queri us web search engin and directori [11, 18, 20, 9, 21]. the kdd task specif provid a small  taxonomi (67 node) along with a set of label queri, and pose a challeng to us thi train data to build a queri  classifi. sever team us the web to enrich the queri and provid more context for classif. the main research question of thi approach the ar (1) how to build a  document classifi, (2) how to translat it classif into the target taxonomi, and (3) how to determin the queri class base on document classif. the win solut of the kdd cup [18] propos  us an ensembl of classifi in conjunct with search multipl search engin. to address issu (1) abov, their  solut us the open directori project (odp) to produc an odp-base document classifi. the odp hierarchi wa then map into the target taxonomi us word match at individu node. a document classifi wa built for the target taxonomi by us the page in the odp  taxonomi that appear in the node map to the particular target node. thu, web document were first classifi with respect to the odp hierarchi, and their classif were subsequ map to the target taxonomi for queri  classif. compar to thi approach, we solv the problem of  document classif directli in the target taxonomi by  us the queri to produc document classifi as describ in section 2. thi simplifi the process and remov the need for map between taxonomi. thi also  streamlin taxonomi mainten and develop. us thi approach, we were abl to achiev good perform in a veri larg scale taxonomi. we also evalu a few  altern how to combin individu document classif when actual classifi the queri. in a follow-up paper [19], shen et al. propos a  framework for queri classif base on bridg between two taxonomi. in thi approach, the problem of not have a document classifi for web result is solv by us a train set avail for document with a differ  taxonomi. for thi, an intermedi taxonomi with a train set (odp) is us. then sever scheme ar tri that  establish a correspond between the taxonomi or allow for map of the train set from the intermedi taxonomi to the target taxonomi. as oppos to thi, we built a  document classifi for the target taxonomi directli, without us document from an intermedi taxonomi. while we were not abl to directli compar the result due to the us of differ taxonomi (we us a much larger taxonomi), our precis and recal result ar consist higher even over the hardest queri set. 5. conclus queri classif is an import inform retriev task. accur classif of search queri is like to benefit a number of higher-level task such as web search and ad match. sinc search queri ar usual short, by themselv thei usual carri insuffici inform for  adequ classif accuraci. to address thi problem, we propos a methodolog for us search result as a sourc of extern knowledg. to thi end, we send the queri to a search engin, and assum that a plural of the  highestrank search result ar relev to the queri. classifi these result then allow us to classifi the origin queri with substanti higher accuraci. the result of our empir evalu definit  confirm that us the web as a repositori of world  knowledg contribut valuabl inform about the queri, and aid in it correct classif. notabl, our method  exhibit significantli higher accuraci than method describ in prior studi3 compar to prior studi, our approach doe not requir ani auxiliari taxonomi, and we produc a queri classifi directli for the target taxonomi.  furthermor, the taxonomi us in thi studi is approxim 2 order of magnitud larger than that us in prior work. we also experi with differ valu of paramet that character our method. when us search result, on can either us onli summari of the result provid by 3 sinc the field of queri classif doe not yet have  establish and agre upon benchmark, direct comparison of result is admittedli tricki. the search engin, or actual crawl the result page for even deeper knowledg. overal, queri classif perform wa the best when us the full crawl page (tabl 1). these result ar consist with prior studi [5], which found that us full crawl page is superior for document classif than us onli brief summari. our find, howev, ar differ from those report by shen et al. [19], who found summari to yield better result. we attribut our observ to us a more elabor vote scheme among the classif of individu search result, as well as to us a more difficult set of rare queri. in thi studi we us two major search engin, a and b. interestingli, we found notabl distinct in the qualiti of their output. notabl, for engin a the overal result were better when us the full crawl page of the search  result, while for engin b it seem to be more benefici to us the summari of result. thi impli that while the qualiti of search result return by engin a is appar better, engin b doe a better work in summar the page. we also found that the best result were obtain by  us full crawl page and perform vote among their individu classif. for a classifi that is extern to the search engin, retriev full page mai be prohibit costli, in which case on might prefer to us summari to gain comput effici. on the other hand, for the owner of a search engin, full page classif is much more effici, sinc it is easi to preprocess all index page by classifi them onc onto the (fix) taxonomi. then, page classif ar obtain as part of the meta-data associ with each search result, and queri classif can be nearli instantan. when us summari it appear that better result ar obtain by first concaten individu summari into a meta-document, and then us it classif as a whole. we believ the reason for thi observ is that summari ar short and inher noisier, and henc their aggreg help to correctli identifi the main theme. consist with our intuit, us too few search result yield us but insuffici knowledg, and us too mani search result lead to inclus of margin relev web page. the best result were obtain when us 40 top search hit. in thi work, we first classifi search result, and then us their classif directli to classifi the origin queri. altern, on can us the classif of search result as featur in order to learn a second-level classifi. in section 3.6, we did some preliminari experi in thi direct, and found that learn such a secondari classifi did not yield consider advantag. we plan to further investig thi direct in our futur work. it is also essenti to note that implement our  methodolog incur littl overhead. if the search engin classifi crawl page dure index, then at queri time we onli need to fetch these classif and do the vote. to conclud, we believ our methodolog for us web search result hold consider promis for substanti improv the accuraci of web search queri. thi is  particularli import for rare queri, for which littl  perqueri learn can be done, and in thi studi we prove that such scarc of inform could be address by leverag the knowledg found on the web. we believ our find will have immedi applic to improv the handl of rare queri, both for improv the search result as well as yield better match advertis. in our further research we also plan to make us of session inform in order to leverag knowledg about previou queri to better classifi subsequ on. 6. refer [1] s. beitzel, e. jensen, o. frieder, d. grossman, d. lewi, a. chowdhuri, and a. kolcz. automat web queri classif us label and unlabel train data. in proceed of sigir"05, 2005. [2] s. beitzel, e. jensen, o. frieder, d. lewi, a. chowdhuri, and a. kolcz. improv automat queri classif via semi-supervis learn. in proceed of icdm"05, 2005. [3] r. duda and p. hart. pattern classif and scene analysi. john wilei and son, 1973. [4] e. efthimiadi and p. biron. ucla-okapi at trec-2: queri expans experi. in trec-2, 1994. [5] e. gabrilovich and s. markovitch. featur gener for text categor us world knowledg. in ijcai"05, page 1048-1053, 2005. [6] l. gravano, v. hatzivassilogl, and r. lichtenstein. categor web queri accord to geograph local. in cikm"03, 2003. [7] e. han and g. karypi. centroid-base document classif: analysi and experiment result. in pkdd"00, septemb 2000. [8] k. jarvelin and j. kekalainen. ir evalu method for retriev highli relev document. in sigir"00, 2000. [9] z. kardkovac, d. tikk, and z. bansaghi. the ferreti algorithm for the kdd cup 2005 problem. in sigkdd explor, volum 7. acm, 2005. [10] p. kowalczyk, i. zukerman, and m. niemann. analyz the effect of queri class on document retriev perform. in proc. australian conf. on ai, page 550-561, 2004. [11] y. li, z. zheng, and h. dai. kdd cup-2005 report: face a great challeng. in sigkdd explor, volum 7, page 91-99. acm, decemb 2005. [12] m. mitra, a. singhal, and c. bucklei. improv automat queri expans. in sigir"98, page 206-214, 1998. [13] m. moran and b. hunt. search engin market, inc.: drive search traffic to your compani"s web site. prentic hall, upper saddl river, nj, 2005. [14] s. robertson, s. walker, s. jone, m. hancock-beaulieu, and m. gatford. okapi at trec-3. in trec-3, 1995. [15] j. rocchio. relev feedback in inform retriev. in the smart retriev system: experi in automat document process, page 313-323. prentic hall, 1971. [16] g. salton and c. bucklei. improv retriev perform by relev feedback. jasi, 41(4):288-297, 1990. [17] t. santner and d. duffi. the statist analysi of discret data. springer-verlag, 1989. [18] d. shen, r. pan, j. sun, j. pan, k. wu, j. yin, and q. yang. q2c@ust: our win solut to queri classif in kddcup 2005. in sigkdd explor, volum 7, page 100-110. acm, 2005. [19] d. shen, r. pan, j. sun, j. pan, k. wu, j. yin, and q. yang. queri enrich for web-queri classif. acm toi, 24:320-352, juli 2006. [20] d. shen, j. sun, q. yang, and z. chen. build bridg for web queri classif. in sigir"06, page 131-138, 2006. [21] d. vogel, s. bickel, p. haider, r. schimpfki, p. siemen, s. bridg, and t. scheffer. classifi search engin queri us the web as background knowledg. in sigkdd explor, volum 7. acm, 2005. [22] e. voorhe. queri expans us lexic-semant relat. in sigir"94, 1994. [23] j. xu and w. bruce croft. improv the effect of inform retriev with local context analysi. acm toi, 18(1):79-112, 2000. 